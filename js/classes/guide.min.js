function Guide(){this.baseURL="http://www.tvgids.nl/json/lists/",this.channelsPath="channels.php",this.channels=[]}function UrlExists(a){var b=new XMLHttpRequest;return b.open("HEAD",a,!1),b.send(),404!=b.status}Guide.prototype={constructor:Guide,setChannels:function(){var a=[];url=this.baseURL+this.channelsPath;var b=$.parseJSON(jQuery.ajax({url:url,async:!1,dataType:"json"}).responseText);$.each(b,function(b,c){var d=c.id;a[d]=c}),chrome.storage.local.set({cachedChannels:a})},getPrograms:function(a){var b="http://www.tvgids.nl/json/lists/programs.php?channels="+a+"&day=0",c=$.parseJSON(jQuery.ajax({url:b,async:!1,dataType:"json"}).responseText);return c[a]},getNext:function(a){var b=[1,2,3,4,31,34,36,37,46,92,460],c=this;chrome.storage.local.get({defaultChannels:b},function(b){$.each(b.defaultChannels,function(b,d){var e=a[d];e.programs=c.getPrograms(e.id),"object"==typeof e.programs&&(e.programs=$.map(e.programs,function(a){return[a]}));var f=new Date;$.each(e.programs,function(a,b){var c=new Date(b.datum_start),d=new Date(b.datum_end);if(f>c&&d>f){if("titel"in b){currentProgram=b;var g=(c.getMinutes()<10?"0":"")+c.getMinutes(),h=(d.getMinutes()<10?"0":"")+d.getMinutes(),i='<li id="'+e.id+'">';if(i+='<div class="current-program">',i+="<div><span>Nu:</span> <br />",i+='<a href="program.html?id='+currentProgram.db_id+"&channel="+e.name+'" class="icon-info-circled">',i+=currentProgram.titel,i+="</a></div>",i+=c.getHours()+":"+g,i+=" -  ",i+=d.getHours()+":"+h,i+="</div>","undefined"!=typeof e.programs[a+1]){var j=e.programs[a+1],k=new Date(j.datum_start),l=new Date(j.datum_end),m=(k.getMinutes()<10?"0":"")+k.getMinutes(),n=(l.getMinutes()<10?"0":"")+l.getMinutes();i+='<div class="next-program">',i+="<div><span>Straks:</span> <br />",i+='<a href="program.html?id='+j.db_id+"&channel="+e.name+'" class="icon-info-circled">',i+=j.titel,i+="</a></div>",i+=k.getHours()+":"+m,i+=" -  ",i+=l.getHours()+":"+n,i+="</div>"}i+="</li>",$(".jcarousel ul").append(i);var o=document.createElement("a");o.setAttribute("href","../channel.html?id="+e.id);var p=new Image;p.src="../../icons/channels/"+e.id+".png",p.onload=function(){p.className="logo",p.setAttribute("title",e.name),$(o).append(p),$("li#"+e.id).prepend(o)},p.onerror=function(){$(o).append("<h2>"+e.name+"</h2>"),$("li#"+e.id).prepend(o)}}return!1}})}),$("#progress-bar").hide(),$(".jcarousel-wrapper").show(),$(".jcarousel").jcarousel(),$(".jcarousel-control-prev").on("jcarouselcontrol:active",function(){$(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("inactive")}).jcarouselControl({target:"-=3"}),$(".jcarousel-control-next").on("jcarouselcontrol:active",function(){$(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("inactive")}).jcarouselControl({target:"+=3"})})}};