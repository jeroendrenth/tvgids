function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}$("document").ready(function(){var a=getParameterByName("id"),b=[1,2,3,4,31,34,36,37,46,92,460];chrome.storage.local.get({cachedChannels:[],defaultChannels:b},function(b){var c=b.cachedChannels[a],d={};$.each(b.defaultChannels,function(e,f){if(f==a){e-1 in b.defaultChannels?(previousChannelId=b.defaultChannels[e-1],previousChannel=b.cachedChannels[previousChannelId],$("#previous").text(previousChannel.name).attr({href:"channel.html?id="+previousChannel.id})):$("#previous").hide(),e+1 in b.defaultChannels?(nextChannelId=b.defaultChannels[e+1],d=b.cachedChannels[nextChannelId],$("#next").text(d.name).attr({href:"channel.html?id="+d.id})):$("#next").hide();var g=new Image;g.src="../../icons/channels/"+c.id+".png",g.onload=function(){g.className="logo",g.setAttribute("title",c.name),$("#toolbar #logo").append(g)},g.onerror=function(){$("#toolbar #logo").append("<h2>"+c.name+"</h2>")}}});var e=new Guide,f=e.getPrograms(a);$.each(f,function(a,b){var c="",d=new Date(b.datum_start),e=new Date(b.datum_end),f=new Date,g=(d.getHours()<10?"0":"")+d.getHours(),h=(d.getMinutes()<10?"0":"")+d.getMinutes(),i=(e.getHours()<10?"0":"")+e.getHours(),j=(e.getMinutes()<10?"0":"")+e.getMinutes();f>d&&e>f&&(c="current");var k="current"==c?'<tr class="'+c+'">':"<tr>";k+='<td id="'+b.db_id+'" class="program"><a href="#">'+b.titel+"</a></td>",k+='<td class="from">'+g+":"+h+"</td>",k+='<td class="to">'+i+":"+j+"</td>",k+="</tr>",$("table").append(k)}),$("html, body").animate({scrollTop:$(".current").offset().top-45},1e3),$(".program").bind("click",function(a){a.preventDefault();var b=$(this).find(".synopsis");if(0===b.length){var c=new Program($(this).attr("id"));c.setInfo();var d='<div class="synopsis"><p>'+c.synopsis+"</p></div>";$(this).append(d),$(this).addClass("open")}else $(this).hasClass("open")?(b.hide(),$(this).removeClass("open")):(b.show(),$(this).addClass("open"))})})});